<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/Celeste6666/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/Celeste6666/images/ico32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/Celeste6666/images/ico16.png">
  <link rel="mask-icon" href="/Celeste6666/images/logo.svg" color="#222">

<link rel="stylesheet" href="/Celeste6666/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css" integrity="sha256-2H3fkXt6FEmrReK448mDVGKb3WW2ZZw35gI7vqHOE4Y=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{&quot;hostname&quot;:&quot;celeste6666.github.io&quot;,&quot;root&quot;:&quot;&#x2F;Celeste6666&#x2F;&quot;,&quot;images&quot;:&quot;&#x2F;Celeste6666&#x2F;images&quot;,&quot;scheme&quot;:&quot;Pisces&quot;,&quot;version&quot;:&quot;8.4.0&quot;,&quot;exturl&quot;:false,&quot;sidebar&quot;:{&quot;position&quot;:&quot;right&quot;,&quot;display&quot;:&quot;post&quot;,&quot;padding&quot;:18,&quot;offset&quot;:12},&quot;copycode&quot;:false,&quot;bookmark&quot;:{&quot;enable&quot;:false,&quot;color&quot;:&quot;#222&quot;,&quot;save&quot;:&quot;auto&quot;},&quot;fancybox&quot;:false,&quot;mediumzoom&quot;:false,&quot;lazyload&quot;:false,&quot;pangu&quot;:false,&quot;comments&quot;:{&quot;style&quot;:&quot;tabs&quot;,&quot;active&quot;:null,&quot;storage&quot;:true,&quot;lazyload&quot;:false,&quot;nav&quot;:null},&quot;motion&quot;:{&quot;enable&quot;:true,&quot;async&quot;:false,&quot;transition&quot;:{&quot;post_block&quot;:&quot;fadeIn&quot;,&quot;post_header&quot;:&quot;fadeInDown&quot;,&quot;post_body&quot;:&quot;fadeInDown&quot;,&quot;coll_header&quot;:&quot;fadeInLeft&quot;,&quot;sidebar&quot;:&quot;fadeInUp&quot;}},&quot;prism&quot;:false,&quot;i18n&quot;:{&quot;placeholder&quot;:&quot;搜尋...&quot;,&quot;empty&quot;:&quot;我們無法找到任何有關 ${query} 的搜索結果&quot;,&quot;hits_time&quot;:&quot;${hits} 找到 ${time} 個結果&quot;,&quot;hits&quot;:&quot;找到 ${hits} 個結果&quot;}}</script>
<meta name="description" content="上一篇文章JavaScript淺嚐紀錄No.7-了解一下DOM吧！已經簡單的介紹DOM是甚麼了，有興趣的可以先去參考。這裡我只會去介紹addEventListener這個事件監聽器，本筆記不會提有關on-event處理器的事情！">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaScript淺嚐紀錄No.8-監聽(Event Listener)DOM事件並做出反應！">
<meta property="og:url" content="https://celeste6666.github.io/Celeste6666/JSLearning/Basic/JavaScriptNo8EventListener/index.html">
<meta property="og:site_name" content="Celeste 技術儲藏室">
<meta property="og:description" content="上一篇文章JavaScript淺嚐紀錄No.7-了解一下DOM吧！已經簡單的介紹DOM是甚麼了，有興趣的可以先去參考。這裡我只會去介紹addEventListener這個事件監聽器，本筆記不會提有關on-event處理器的事情！">
<meta property="og:locale" content="zh_TW">
<meta property="og:image" content="https://www.w3.org/TR/DOM-Level-3-Events/images/eventflow.svg">
<meta property="article:published_time" content="2020-07-03T11:25:19.000Z">
<meta property="article:modified_time" content="2020-07-11T06:26:21.208Z">
<meta property="article:author" content="Celeste">
<meta property="article:tag" content="JavaScript">
<meta property="article:tag" content="DOM事件(DOM Event)">
<meta property="article:tag" content="事件監聽(Event Listener)">
<meta property="article:tag" content="事件傳遞(Event Flow)">
<meta property="article:tag" content="捕獲事件(Event Capturing)">
<meta property="article:tag" content="冒泡事件(Event Bubbling)">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://www.w3.org/TR/DOM-Level-3-Events/images/eventflow.svg">


<link rel="canonical" href="https://celeste6666.github.io/Celeste6666/JSLearning/Basic/JavaScriptNo8EventListener/">



<script class="next-config" data-name="page" type="application/json">{&quot;sidebar&quot;:&quot;&quot;,&quot;isHome&quot;:false,&quot;isPost&quot;:true,&quot;lang&quot;:&quot;zh-TW&quot;,&quot;comments&quot;:true,&quot;permalink&quot;:&quot;https:&#x2F;&#x2F;celeste6666.github.io&#x2F;Celeste6666&#x2F;JSLearning&#x2F;Basic&#x2F;JavaScriptNo8EventListener&#x2F;&quot;,&quot;path&quot;:&quot;JSLearning&#x2F;Basic&#x2F;JavaScriptNo8EventListener&#x2F;&quot;,&quot;title&quot;:&quot;JavaScript淺嚐紀錄No.8-監聽(Event Listener)DOM事件並做出反應！&quot;}</script>

<script class="next-config" data-name="calendar" type="application/json">&quot;&quot;</script>
<title>JavaScript淺嚐紀錄No.8-監聽(Event Listener)DOM事件並做出反應！ | Celeste 技術儲藏室</title><script src="/Celeste6666/js/config.js"></script>
  




  <noscript>
    <link rel="stylesheet" href="/Celeste6666/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切換導航欄" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/Celeste6666/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Celeste 技術儲藏室</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">成長就是一種修練<br>願你我還能是最初的那個少年！</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/Celeste6666/" rel="section"><i class="fa fa-home fa-fw"></i>首頁</a></li>
        <li class="menu-item menu-item-tags"><a href="/Celeste6666/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>標籤</a></li>
        <li class="menu-item menu-item-categories"><a href="/Celeste6666/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分類</a></li>
        <li class="menu-item menu-item-archives"><a href="/Celeste6666/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>歸檔</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目錄
        </li>
        <li class="sidebar-nav-overview">
          本站概要
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BA%8B%E4%BB%B6%E7%9B%A3%E8%81%BD%E5%99%A8-addEventListener-%E5%AF%AB%E6%B3%95"><span class="nav-number">1.</span> <span class="nav-text">事件監聽器(addEventListener)寫法</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BA%8B%E4%BB%B6-Event-%E5%BE%9E%E5%93%AA%E8%A3%A1%E4%BE%86%E7%9A%84%EF%BC%9F"><span class="nav-number">2.</span> <span class="nav-text">事件(Event)從哪裡來的？</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8B%E4%BB%B6%E5%82%B3%E9%81%9E-Event-Flow"><span class="nav-number">2.1.</span> <span class="nav-text">事件傳遞(Event Flow)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Event-Flow-%E4%BA%8B%E4%BB%B6%E5%82%B3%E9%81%9E-%E7%9A%843%E5%80%8B%E9%9A%8E%E6%AE%B5%E5%88%86%E5%88%A5%E4%BB%A3%E8%A1%A8%E4%BB%80%E9%BA%BC%EF%BC%9F"><span class="nav-number">2.1.1.</span> <span class="nav-text">Event Flow(事件傳遞)的3個階段分別代表什麼？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%81%9C%E6%AD%A2%E9%A0%90%E8%A8%AD%E8%A1%8C%E7%82%BA%E5%8F%8A%E5%81%9C%E6%AD%A2%E4%BA%8B%E4%BB%B6%E5%82%B3%E9%81%9E"><span class="nav-number">2.1.2.</span> <span class="nav-text">停止預設行為及停止事件傳遞</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8B%E4%BB%B6-Event-%E7%A8%AE%E9%A1%9E"><span class="nav-number">2.2.</span> <span class="nav-text">事件(Event)種類</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8B%E4%BB%B6%E5%A7%94%E6%B4%BE-Event-Delegation"><span class="nav-number">2.3.</span> <span class="nav-text">事件委派(Event Delegation)</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Celeste"
      src="/Celeste6666/uploads/avatar.jpg">
  <p class="site-author-name" itemprop="name">Celeste</p>
  <div class="site-description" itemprop="description">我是Celeste，這裡將記錄我成為前端工程師前累積的知識，並希望自己能夠堅持住寫下技術筆記的習慣，有錯誤也請各位不吝指點。</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/Celeste6666/archives/">
        
          <span class="site-state-item-count">60</span>
          <span class="site-state-item-name">文章</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/Celeste6666/categories/">
          
        <span class="site-state-item-count">27</span>
        <span class="site-state-item-name">分類</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/Celeste6666/tags/">
          
        <span class="site-state-item-count">34</span>
        <span class="site-state-item-name">標籤</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/Celeste6666" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Celeste6666" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:aafree2014@gmail.com" title="E-Mail → mailto:aafree2014@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="回到頂端">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-TW">
    <link itemprop="mainEntityOfPage" href="https://celeste6666.github.io/Celeste6666/JSLearning/Basic/JavaScriptNo8EventListener/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/Celeste6666/uploads/avatar.jpg">
      <meta itemprop="name" content="Celeste">
      <meta itemprop="description" content="我是Celeste，這裡將記錄我成為前端工程師前累積的知識，並希望自己能夠堅持住寫下技術筆記的習慣，有錯誤也請各位不吝指點。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Celeste 技術儲藏室">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          JavaScript淺嚐紀錄No.8-監聽(Event Listener)DOM事件並做出反應！
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2020-07-03 19:25:19" itemprop="dateCreated datePublished" datetime="2020-07-03T19:25:19+08:00">2020-07-03</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新於</span>
        <time title="修改時間：2020-07-11 14:26:21" itemprop="dateModified" datetime="2020-07-11T14:26:21+08:00">2020-07-11</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分類於</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/Celeste6666/categories/JavaScript/" itemprop="url" rel="index"><span itemprop="name">JavaScript</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/Celeste6666/categories/JavaScript/JavaScript%E6%B7%BA%E5%9A%90%E7%B4%80%E9%8C%84/" itemprop="url" rel="index"><span itemprop="name">JavaScript淺嚐紀錄</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>上一篇文章<a href="https://celeste6666.github.io/2020/06/03/JavaScriptNo7_DOM&Event/">JavaScript淺嚐紀錄No.7-了解一下DOM吧！</a>已經簡單的介紹DOM是甚麼了，有興趣的可以先去參考。<br>這裡我只會去介紹addEventListener這個事件監聽器，本筆記不會提有關on-event處理器的事情！</p>
<span id="more"></span>
<h1 id="事件監聽器-addEventListener-寫法"><a href="#事件監聽器-addEventListener-寫法" class="headerlink" title="事件監聽器(addEventListener)寫法"></a>事件監聽器(addEventListener)寫法</h1>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">currentTarget.addEventListener(handler,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;…&#125;,<span class="literal">true</span>/<span class="literal">false</span>)</span><br></pre></td></tr></table></figure>

<h1 id="事件-Event-從哪裡來的？"><a href="#事件-Event-從哪裡來的？" class="headerlink" title="事件(Event)從哪裡來的？"></a>事件(Event)從哪裡來的？</h1><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/Event">MDN</a></p>
<blockquote>
<p>The Event interface represents an event which takes place in the DOM.</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://www.w3schools.com/js/js_events.asp">w3school-JavaScript Events</a></p>
<blockquote>
<p>HTML events are “things” that happen to HTML elements.</p>
</blockquote>
<p>DOM事件(DOM Event)指的是某件事情(如點擊<code>&#39;click&#39;</code>、聚焦<code>&#39;focus&#39;</code>)發生在了DOM的身上(如某個元素節點)。</p>
<h2 id="事件傳遞-Event-Flow"><a href="#事件傳遞-Event-Flow" class="headerlink" title="事件傳遞(Event Flow)"></a>事件傳遞(Event Flow)</h2><p>簡單介紹一下甚麼是<strong>事件(Event)傳遞</strong><br>事件監聽器中的第3個參數決定這個DOM物件是在Capture階段還是Bubbling階段被觸發(如果這個DOM物件本身就是觸發事件的元素，就是在At target階段的話，就一定會被觸發，而不須理會綁定的參數的是Capture還是Bubbling)。<br><img src="https://www.w3.org/TR/DOM-Level-3-Events/images/eventflow.svg" alt="W3C-Graphical representation of an event dispatched in a DOM tree using the DOM event flow"></p>
<p>上面圖片中所畫的紅色跟綠色箭頭就是我們說的Event Flow(事件傳遞)，如何去判斷現在是在<br>事件傳遞的哪個階段，可以透過被監聽的DOM物件的這段語法<code>event.eventPhase</code>來查詢，<code>event.eventPhase</code>回傳的值會讓我們知道這個DOM物件是在哪個階段被觸發的，如果回傳<code>1</code>就代表它是在Capture Phase、<code>2</code>代表At target Phase、<code>3</code>代表 Bubbling Phase，這3個詞組合起來就是一個完整的Event Flow(事件傳遞)。</p>
<h3 id="Event-Flow-事件傳遞-的3個階段分別代表什麼？"><a href="#Event-Flow-事件傳遞-的3個階段分別代表什麼？" class="headerlink" title="Event Flow(事件傳遞)的3個階段分別代表什麼？"></a>Event Flow(事件傳遞)的3個階段分別代表什麼？</h3><ul>
<li>Capture Phase：event事件從上(根元素)到下(target元素)傳遞，並且在途中去觸發有綁定相同event事件的元素(第3個參數要設定<code>true</code>)，去尋找觸發event事件的元素。</li>
<li>At target Phase：當event事件到達觸發event事件的元素時。</li>
<li>Bubbling Phase：event事件從下(target元素)到上(根元素)，往來時路傳遞回去，並且在途中去觸發有綁定相同event事件的元素(第3個參數要設定<code>false</code>)。</li>
</ul>


<p>來看幾個範例：<br><strong>Capturing</strong><br>請開啟Chrome 開發者工具來檢視<code>event.target</code>。</p>
<p class="codepen" data-height="255" data-theme-id="dark" data-default-tab="js,result" data-user="JOUCHUN" data-slug-hash="oNbpGyP" style="height: 255px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="capture phase">
  <span>See the Pen <a target="_blank" rel="noopener" href="https://codepen.io/JOUCHUN/pen/oNbpGyP">
  capture phase</a> by KUO JOUCHUN (<a target="_blank" rel="noopener" href="https://codepen.io/JOUCHUN">@JOUCHUN</a>)
  on <a target="_blank" rel="noopener" href="https://codepen.io">CodePen</a>.</span>
</p>
<script async src="https://static.codepen.io/assets/embed/ei.js"></script>


<p>當點擊藍色Capturing按鈕時，會發現執行的順序是從<code>list</code>→<code>listCapturing</code>→<code>btnCapturing</code>，這是因為我們將這3個元素第3個參數都設定成<code>true</code>，所以<code>click</code>事件會從藍色<code>btnCapturing</code>這個DOM物件最上層開始往下，順序類似<code>body</code>→<code>list</code>→<code>listCapturing</code>→<code>btnCapturing</code>，我們沒有在<code>body</code>身上綁定事件監聽器，所以當事件傳遞到<code>body</code>時，並不會觸發任何行為，我們有在<code>list</code>及<code>listCapturing</code>身上各綁定了會在Capture Phase時被觸發的<code>click</code>事件(當然它們也都會在At target Phase時也會被觸發)，所以當事件傳遞到<code>list</code>→<code>listCapturing</code>時，會依序觸發綁定的事件。</p>
<p><strong>Bubbling</strong><br>請開啟Chrome 開發者工具來檢視<code>event.target</code>。</p>
<p class="codepen" data-height="265" data-theme-id="dark" data-default-tab="js,result" data-user="JOUCHUN" data-slug-hash="KKVZXxN" style="height: 265px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="bubbling phase">
  <span>See the Pen <a target="_blank" rel="noopener" href="https://codepen.io/JOUCHUN/pen/KKVZXxN">
  bubbling phase</a> by KUO JOUCHUN (<a target="_blank" rel="noopener" href="https://codepen.io/JOUCHUN">@JOUCHUN</a>)
  on <a target="_blank" rel="noopener" href="https://codepen.io">CodePen</a>.</span>
</p>
<script async src="https://static.codepen.io/assets/embed/ei.js"></script>

當點擊紅色Bubbling按鈕時，會發現執行的順序是跟上面的Capturing按鈕是相反的，是`btnBubbling`→`listBubbling`→`list`，這是因為我們將這3個元素第3個參數都設定成`false`，所以`click`事件會從紅色`btnBubbling`這個DOM物件開始往上，順序類似`btnBubbling`→`listBubbling`→`list`→`body`，同樣的我們並沒有在`body`身上綁定事件監聽器，所以當事件傳遞到`body`時，並不會觸發任何行為，我們有在`listBubbling`及`list`身上各綁定了會在Bubbling Phase時被觸發的`click`事件(當然它們也都會在At target Phase時也會被觸發)，所以當事件傳遞到`listBubbling`→`list`時，會依序觸發綁定的事件。

<p>到這裡大家對事件傳遞應該都有一點概念了，但這時我卻產生了一個疑問，如果我是這麼綁定事件的話，會發生甚麼事？<br>我在<code>list</code>第3個參數設定<code>false</code>，而<code>btnCapturing</code>跟<code>listCapturing</code>設定為<code>true</code>，再來看看會是甚麼結果。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> list = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.list&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> listCapturing = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.list-capturing&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> btnCapturing = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.btn-capturing&#x27;</span>)</span><br><span class="line">btnCapturing.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`btnCapturing event物件`</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(e)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`currentTarget被監聽的元素(也是this):`</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`觸發click事件的元素(e.target):`</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(e.target)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`btnCapturing的觸發階段:<span class="subst">$&#123;e.eventPhase&#125;</span>`</span>)</span><br><span class="line">&#125;, <span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line">listCapturing.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`listCapturing event物件`</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(e)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`currentTarget被監聽的元素(也是this):`</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`觸發click事件的元素(e.target):`</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(e.target)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`listCapturing的觸發階段:<span class="subst">$&#123;e.eventPhase&#125;</span>`</span>)</span><br><span class="line">&#125;, <span class="literal">true</span>)</span><br><span class="line">list.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`list event物件`</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(e)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`currentTarget被監聽的元素(也是this):`</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`觸發click事件的元素(e.target):`</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(e.target)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`list的觸發階段:<span class="subst">$&#123;e.eventPhase&#125;</span>`</span>)</span><br><span class="line">&#125;, <span class="literal">false</span>)</span><br></pre></td></tr></table></figure>

<p>這時候會發現事件傳遞的方向其實一樣是<code>body</code>→<code>list</code>→<code>listCapturing</code>→<code>btnCapturing</code>→<code>btnCapturing</code>→<code>listCapturing</code>→<code>list</code>→<code>body</code>，同樣的因為<code>body</code>並沒有綁定任何監聽器所以會被略過，而在事件捕獲階段，到達<code>list</code>時，發現<code>list</code>並沒有綁定在當它處於捕獲階段時的事件監聽器，所以會略過它再到<code>listCapturing</code>→<code>btnCapturing</code>去執行事件函式，但這時候的<strong>事件傳遞</strong>並不會因為已經到了<code>btnCapturing</code>就停止，而是會繼續執行冒泡階段，所以會繼續從<code>btnCapturing</code>開始再繼續往上傳遞事件，但<code>btnCapturing</code>及<code>listCapturing</code>並沒有綁定會在冒泡階段執行的是監聽器，所以被略過，事件被傳遞到了<code>list</code>時，就發現原來你有綁定處於冒泡階段時的事件監聽器喔！那就來執行一下你的事件函式。</p>


<blockquote>
<p>到這我的結論就是：如果有一個DOM物件綁定事件監聽器的話，那麼這個事件一定會從上到下，再從下到上傳遞，至於這個event事件經過其他DOM物件時，會不會被觸發取決於事件傳遞到該DOM物件時，它有沒有綁定監聽器；甚麼時候被觸發，取決於綁定的第3個參數是<code>true</code>(Capture階段)還是<code>false</code>(Bubbling階段)，如果是<code>true</code>的話，那麼在事件傳遞是Capture階段經過該DOM物件的話，就會被觸發該事件函式，反之如果是<code>false</code>的話，就會在事件傳遞是Bubbling階段時被觸發。</p>
</blockquote>
<p>大家可以看看這部影片<a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=sfKDOOJgbSI">techsith-Event Bubbling and Capturing in JavaScript</a>。</p>
<h3 id="停止預設行為及停止事件傳遞"><a href="#停止預設行為及停止事件傳遞" class="headerlink" title="停止預設行為及停止事件傳遞"></a>停止預設行為及停止事件傳遞</h3><ul>
<li><code>event.preventDefault()</code><br>甚麼是預設行為？在HTML中的<code>&lt;a href=&quot;#&quot;&gt;&lt;/a&gt;</code>的預設行為就是連結別的網頁，雖然我們會透過設定<code>href=&quot;#&quot;</code>來取消跳轉調別的網頁，但認真看一下上面的網址其實是會多出一個#，所以不管怎麼設定其實網頁還是會跳轉。而<code>&lt;input type=&quot;submit&quot;&gt;</code>的預設行為就是將表單的資料提交到伺服器，也因此按下按鈕時會導致頁面刷新。<br>但我們在設計網頁時，常常是需要透過這些它們來再目前頁面做一些效果，例如按下按鈕就會出現一個小方塊，但這些預設行為會導致頁面刷新而無法實現這些效果，因此可以透過<code>event.preventDefault()</code>來取消這些預設行為，但是事件傳遞並不會被取消喔。<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">listCapturing.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">  event.preventDefault();</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
<li><code>event.stopPropagation()</code><br>上面已經有介紹過捕獲或冒泡的事件傳遞，而<code>event.stopPropagation()</code>就是來停止這些傳遞行為的，也因此當在點擊btnCapturing或是brnBubbling時，就不會再將事件從上到下、從下到上傳遞，而是只有是在At_Target階段才能被觸發事件<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">listCapturing.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">  event.stopPropagation();</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
</ul>
<p>註：<code>event</code>是事件發生時，一定會出現的物件，透過這個<code>event</code>物件可以去尋找事件屬性(<code>event.target</code>可以知道目前點擊的DOM物件)或是使用物件內的方法(<code>event.stopPropagation()</code>停止傳遞行為的方法)，通常會用<code>event</code>或<code>e</code>來表示<code>event</code>物件。</p>
<h2 id="事件-Event-種類"><a href="#事件-Event-種類" class="headerlink" title="事件(Event)種類"></a>事件(Event)種類</h2><p>事件種類太多了，如果想要了解可以參考<a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/Events#Most_common_categories">MDN-Event reference</a>，比較常用的就是滑鼠的<code>click</code>事件、表單的<code>submit</code>、<code>change</code>(表單內容改變並且不在<code>focus</code>的狀態)、<code>input</code>(表單內容改變)事件。</p>
<h2 id="事件委派-Event-Delegation"><a href="#事件委派-Event-Delegation" class="headerlink" title="事件委派(Event Delegation)"></a>事件委派(Event Delegation)</h2><p>當需要綁定相同事件在多個不同元素，且這些元素擁有共同的祖宗元素時，就可以借助事件具有傳遞的特性(主要是指Bubbling Event)，將該事件綁定在該祖宗元素上，而無須在子元素上一一綁定事件，而這樣的行為就是**事件委派(Event Delegation)**。<br>為什麼不建議將事件一個一個綁定呢？<br>這是因為設定一個函式，就會占用一份記憶體空間，所以使用事件委派的方式，可以減少記憶體空間的使用。<br>另外在不需要事件監聽的狀況下，可以統一移除，也不需要一個一個去移除事件監聽器了。</p>
<p>當我們使用事件委派(Event Delegation)的方式來綁定監聽器，除了借助事件傳遞的特性之外，還借助了事件擁有的屬性<code>event.target</code>，<code>event.target</code>可以幫助我們知道現在觸發事件的目標元素是哪個，也因此我們可以透過操作這個目標元素來達成我們的目的。</p>
<p>請開啟Chrome 開發者工具來檢視<code>event.target</code>。</p>
<p class="codepen" data-height="265" data-theme-id="dark" data-default-tab="js,result" data-user="JOUCHUN" data-slug-hash="wvMyYEL" style="height: 265px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;" data-pen-title="Event Delegation">
  <span>See the Pen <a target="_blank" rel="noopener" href="https://codepen.io/JOUCHUN/pen/wvMyYEL">
  Event Delegation</a> by KUO JOUCHUN (<a target="_blank" rel="noopener" href="https://codepen.io/JOUCHUN">@JOUCHUN</a>)
  on <a target="_blank" rel="noopener" href="https://codepen.io">CodePen</a>.</span>
</p>
<script async src="https://static.codepen.io/assets/embed/ei.js"></script>

<p>參考：<br><a target="_blank" rel="noopener" href="https://www.itread01.com/content/1550540353.html">JavaScript 事件對記憶體和效能的影響</a><br><a target="_blank" rel="noopener" href="https://medium.com/@realdennis/event-delegation-%E4%BA%8B%E4%BB%B6%E5%A7%94%E6%B4%BE%E4%BB%8B%E7%B4%B9-%E8%88%87-%E8%A7%B8%E7%99%BC%E5%A7%94%E6%B4%BE%E7%9A%84%E5%9B%9E%E5%91%BC%E5%87%BD%E6%95%B8-2990921a5ba2">Event Delegation — 事件委派介紹 與 觸發委派的回呼函數</a><br><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=3cTdztTmtL0">JavaScript 面試：事件傳遞機制和事件委託 Event Propagation &amp; Event Delegation - 彭彭直播</a></p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/Celeste6666/tags/JavaScript/" rel="tag"># JavaScript</a>
              <a href="/Celeste6666/tags/DOM%E4%BA%8B%E4%BB%B6-DOM-Event/" rel="tag"># DOM事件(DOM Event)</a>
              <a href="/Celeste6666/tags/%E4%BA%8B%E4%BB%B6%E7%9B%A3%E8%81%BD-Event-Listener/" rel="tag"># 事件監聽(Event Listener)</a>
              <a href="/Celeste6666/tags/%E4%BA%8B%E4%BB%B6%E5%82%B3%E9%81%9E-Event-Flow/" rel="tag"># 事件傳遞(Event Flow)</a>
              <a href="/Celeste6666/tags/%E6%8D%95%E7%8D%B2%E4%BA%8B%E4%BB%B6-Event-Capturing/" rel="tag"># 捕獲事件(Event Capturing)</a>
              <a href="/Celeste6666/tags/%E5%86%92%E6%B3%A1%E4%BA%8B%E4%BB%B6-Event-Bubbling/" rel="tag"># 冒泡事件(Event Bubbling)</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/Celeste6666/JSLearning/Basic/JavaScriptNo7DOM&Event/" rel="prev" title="JavaScript淺嚐紀錄No.7-了解一下DOM吧！">
                  <i class="fa fa-chevron-left"></i> JavaScript淺嚐紀錄No.7-了解一下DOM吧！
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/Celeste6666/Vue/Basic/VueNo1Intro/" rel="next" title="DAY01 | 跟 Vue.js 認識的30天 -前言">
                  DAY01 | 跟 Vue.js 認識的30天 -前言 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>





<script src="/Celeste6666/js/comments.js"></script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">若要轉載文章，麻煩請保留原作者名稱與原始連結。</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> 強力驅動
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/Celeste6666/js/utils.js"></script><script src="/Celeste6666/js/motion.js"></script><script src="/Celeste6666/js/next-boot.js"></script>

  






  





</body>
</html>
